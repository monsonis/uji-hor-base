<?xml version = '1.0' encoding = 'UTF-8'?>
<TriggerOraclev10g class="oracle.dbtools.crest.model.design.storage.oracle.v10g.TriggerOraclev10g" name="mutante_3_final" id="54B91E82-9A40-16F6-FDDD-FE1164928CDB" directorySegmentName="seg_0">
<createdBy>ferrerq</createdBy>
<createdTime>2013-01-08 09:58:07 UTC</createdTime>
<generatorID>Generado por el Usuario</generatorID>
<ownerDesignName>uji_horarios</ownerDesignName>
<actions>INSERT, UPDATE</actions>
<body>begin&lt;br/&gt;   declare&lt;br/&gt;      v_aux   NUMBER;&lt;br/&gt;      v_id    number;&lt;br/&gt;&lt;br/&gt;      cursor reg (v_rowid rowid) is&lt;br/&gt;         select *&lt;br/&gt;         from   uji_horarios.hor_items&lt;br/&gt;         where  rowid = v_rowid;&lt;br/&gt;&lt;br/&gt;      cursor lista_detalle (p_id in number) is&lt;br/&gt;         select distinct id, fecha, docencia_paso_1, docencia_paso_2, docencia, orden_id, numero_iteraciones,&lt;br/&gt;                         repetir_cada_semanas, fecha_inicio, fecha_fin, semestre_id, curso_id, grupo_id,&lt;br/&gt;                         tipo_subgrupo_id, subgrupo_id, dia_semana_id, tipo_dia, festivos&lt;br/&gt;         from            uji_horarios.hor_v_items_detalle&lt;br/&gt;         where           id = p_id&lt;br/&gt;         and             docencia = &apos;S&apos;;&lt;br/&gt;   begin&lt;br/&gt;      for i in 1 .. mutante_items.v_num loop&lt;br/&gt;         for v_reg in reg (mutante_items.v_var_tabla (i)) loop&lt;br/&gt;            if v_reg.detalle_manual = 0 then&lt;br/&gt;               delete      uji_horarios.hor_items_detalle&lt;br/&gt;               where       item_id = v_reg.id;&lt;br/&gt;&lt;br/&gt;               for x in lista_detalle (v_reg.id) loop&lt;br/&gt;                  if x.docencia = &apos;S&apos; then&lt;br/&gt;                     begin&lt;br/&gt;                        v_aux := uji_horarios.hibernate_sequence.nextval;&lt;br/&gt;&lt;br/&gt;                        insert into hor_items_detalle&lt;br/&gt;                                    (id, item_id,&lt;br/&gt;                                     inicio,&lt;br/&gt;                                     fin&lt;br/&gt;                                    )&lt;br/&gt;                        values      (v_aux, v_reg.id,&lt;br/&gt;                                     to_date (to_char (x.fecha, &apos;dd/mm/yyyy&apos;) || &apos; &apos;&lt;br/&gt;                                              || to_char (v_reg.hora_inicio, &apos;hh24:mi:ss&apos;),&lt;br/&gt;                                              &apos;dd/mm/yyyy hh24:mi:ss&apos;),&lt;br/&gt;                                     to_date (to_char (x.fecha, &apos;dd/mm/yyyy&apos;) || &apos; &apos;&lt;br/&gt;                                              || to_char (v_reg.hora_fin, &apos;hh24:mi:ss&apos;),&lt;br/&gt;                                              &apos;dd/mm/yyyy hh24:mi:ss&apos;)&lt;br/&gt;                                    );&lt;br/&gt;                     exception&lt;br/&gt;                        when others then&lt;br/&gt;                           null;&lt;br/&gt;                     end;&lt;br/&gt;                  end if;&lt;br/&gt;               end loop;&lt;br/&gt;            end if;&lt;br/&gt;         end loop;&lt;br/&gt;      end loop;&lt;br/&gt;   end;&lt;br/&gt;end mutante_3_final;</body>
<triggerTime>AFTER</triggerTime>
<columns>4D67A757-4A56-0A72-CFEA-00531E069B8B, 5FFC2870-0502-763C-4311-458CF79FA8AE, 02302C09-ABDC-0817-5F09-2B27D4AF3129, 8D3AE27D-87C2-16C7-C902-DF11640AFB24, 7C6041E8-0990-596B-A1C6-3FFADE6F0913</columns>
<owner>09CD6EB1-DC11-EE73-0B0D-14C82C25B460</owner>
<scope>FOR EACH STATEMENT</scope>
<state>ENABLE</state>
<table>7185EE22-E0F3-C3F6-15A8-A27E06438805</table>
</TriggerOraclev10g>